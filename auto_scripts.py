import time
import config

# ==========================================
# 📝 這裡填入你用 manual_control 測出來的數據
# 格式: [Base, Shoulder, Elbow, Gripper]
# ==========================================

# 範例：抓取供料區積木的動作
SEQUENCE_PICKUP = [
    [1500, 1500, 1800, 1450], # 1. 歸位 (張開)
    [1800, 1000, 2100, 1450], # 2. 轉向供料區 + 下降
    [1800, 1000, 2100, 2350], # 3. 夾緊
    [1800, 1600, 1800, 2350], # 4. 抬起
]

# 範例：堆疊成「高塔」的動作 (放在原點)
SEQUENCE_TOWER = [
    # --- 第一塊 ---
    [1500, 1500, 1800, 2350], # 轉向原點 (抬高)
    [1500, 1000, 2000, 2350], # 下降放置
    [1500, 1000, 2000, 1450], # 放開
    [1500, 1500, 1800, 1450], # 離開
    # (這裡你可以繼續複製貼上第二塊、第三塊的座標...)
     # --- 第二塊 ---
    [1580, 1500, 1800, 2350], # 轉向原點 (抬高)
    [1580, 1000, 2000, 2350], # 下降放置
    [1580, 1000, 2000, 1450], # 放開
    [1580, 1500, 1800, 1450], # 離開
   
     # --- 第三塊 ---
    [1540, 1500, 1800, 2350], # 轉向原點 (抬高)
    [1540, 1300, 2200, 2350], # 下降放置
    [1540, 1300, 2200, 1450], # 放開
    [1540, 1500, 1800, 1450], # 離開
    
]

def run_sequence(pi, sequence_data):
    """ 執行一串動作 """
    print("🎬 開始執行自動腳本...")
    
    # 對應腳位順序
    pins = [config.PIN_BASE, config.PIN_SHOULDER, config.PIN_ELBOW, config.PIN_GRIPPER]
    
    for step in sequence_data:
        # step 就是一組 [b, s, e, g] 的 PWM
        for i, pwm in enumerate(step):
            pi.set_servo_pulsewidth(pins[i], pwm)
        
        # 每個動作停頓一下，讓影片看起來穩一點
        time.sleep(1.0)
    
    print("✅ 腳本執行完畢")
